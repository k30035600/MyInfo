# 금융정보 고급분석

> **참고**: 상세 API 스펙·흐름은 `금융정보 고급분석.pdf`(동일 폴더에 첨부 시)를 기준으로 하며, 구체적인 코드는 향후 진행합니다.

## 1. 목적

금융정보 고급분석을 위해 **cash_after.xlsx**의 다음 컬럼에 정보를 저장·활용한다.

| 컬럼       | 설명 |
|------------|------|
| **업종코드** | KSIC 등 업종 코드 |
| **업종분류** | KSIC 등에 따른 업종명·분류명 |
| **위험도**   | 0 또는 5.0 (고위험 구간은 5.0) |

## 2. 업종분류(KSIC 등) 반영

- **업종코드**가 있는 행: **linkage_table.json**만 사용. 업종코드→업종분류·리스크 매칭하여 **업종분류** 컬럼과 **위험도** 저장. (카테고리테이블에서는 업종분류 미사용)
- 구현: `_apply_업종분류_from_linkage()` (cash_app.py).

## 3. 고위험 분류 및 위험도 5.0

다음 세 부문은 **위험도 5.0**으로 통일하여 저장한다.

| 분류         | 설명 | 비고 |
|--------------|------|------|
| **금전대부** | 대부중개 / P2P연계대부 등 | category_table 분류=금전대부, 키워드 매칭 |
| **가상자산** | 가상자산 거래소·보관 등 | category_table 분류=가상자산, 키워드 매칭 |
| **증권거래** | 선물 / 투자운용 등 | category_table 분류=증권투자, 키워드 매칭 |

- **적용 방식**: category_table.json에서 분류가 **가상자산**, **증권투자**, **금전대부**인 행의 **키워드**를 거래 내용(기타거래·키워드·금융사 등)과 매칭하여, 매칭 시 해당 행의 **카테고리**를 **업종분류** 컬럼에 넣고 **위험도 5.0** 저장.
- 구현: `_apply_risk_category_by_keywords()` (cash_app.py).

## 4. API 구성 (설계)

고급분석용 API는 **첨부 문서(금융정보 고급분석.pdf)** 와 같이 구성한다. 구체적인 엔드포인트·요청/응답 형식·인증 등은 PDF 기준으로 향후 구현한다.

- **금전대부**: 대부업 API·등록기관 데이터 연동 시 PDF 체크리스트 참고.
- **가상자산**: VASP 명단·거래소 API 등 활용 절차는 PDF 및 `가상자산(Virtual Asset) 정보 활용 API 가이드` 참고.
- **증권거래**: 선물/투자운용 관련 API는 PDF 기준으로 정의 예정.

## 5. 파일·폴더

- **cash_after.xlsx**: 업종코드, 업종분류, 위험도 저장 대상.
- **category_table.json**: 분류=가상자산 / 증권투자 / 금전대부 규칙 보관. (업종분류는 linkage_table.json만 사용)
- **readme(삭제하지 말것)/금융정보 고급분석.pdf**: 상세 API·절차 문서 (첨부 시 동일 폴더에 저장).
