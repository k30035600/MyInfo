# 은행 거래 내역 분석 페이지 제안서

## 1. 페이지 구성 제안

### 1.1 메인 분석 대시보드 (`/analysis`)
- 개요 통계 카드
- 주요 차트 시각화
- 필터 및 기간 선택

### 1.2 세부 분석 섹션
1. **카테고리별 분석** (`/analysis/category`)
   - 적요별 입출금 분석
   - 내용별 입출금 분석
   - 구분별 입출금 분석

2. **시계열 분석** (`/analysis/trend`)
   - 월별 입출금 추이
   - 연도별 입출금 추이
   - 거래일별 통계

3. **은행/계좌별 분석** (`/analysis/bank`)
   - 은행별 입출금 현황
   - 계좌별 입출금 현황
   - 은행별 거래 패턴

4. **상세 내역** (`/analysis/detail`)
   - 필터링 가능한 거래 내역
   - 검색 기능
   - 엑셀 내보내기

## 2. 분석 기능 상세

### 2.1 대시보드 주요 통계
- 총 입금액 / 총 출금액 / 순잔액
- 평균 일일 입금액 / 출금액
- 거래 건수 (전체/입금/출금)
- 가장 많은 거래 카테고리 (적요/내용/구분)
- 최대 거래액 및 최소 거래액

### 2.2 카테고리별 분석
**적요별 분석:**
- 적요별 입금 합계 (상위 10개)
- 적요별 출금 합계 (상위 10개)
- 적요별 거래 건수
- 파이 차트 / 바 차트

**내용별 분석:**
- 내용별 입금 합계 (상위 10개)
- 내용별 출금 합계 (상위 10개)
- 내용별 거래 건수
- 트리맵 차트

**구분별 분석:**
- 구분별 입금/출금 통계
- 구분별 거래 건수
- 도넛 차트

### 2.3 시계열 분석
- 월별 입금/출금 추이 (라인 차트)
- 연도별 입금/출금 추이
- 거래일별 통계 (히트맵)
- 계절성 분석

### 2.4 은행/계좌별 분석
- 은행별 입금/출금 비율
- 계좌별 입금/출금 현황
- 은행별 거래 패턴 비교
- 스택 바 차트

### 2.5 검색 및 필터 기능
- 키워드 검색 (적요, 내용, 거래점, 메모)
- 금액 범위 필터
- 날짜 범위 필터
- 은행/계좌 필터
- 입금/출금 필터

## 3. 시각화 제안

### 3.1 사용할 차트 라이브러리
- **Chart.js** 또는 **ECharts** (무료, 한국어 지원)
- **D3.js** (고급 커스터마이징 필요 시)

### 3.2 주요 차트 유형
1. **파이 차트**: 카테고리별 비율
2. **바 차트**: 카테고리별 금액 비교
3. **라인 차트**: 시계열 추이
4. **도넛 차트**: 구분별 통계
5. **히트맵**: 날짜별 거래 패턴
6. **트리맵**: 다차원 데이터 시각화
7. **스택 바 차트**: 은행/계좌별 비교

## 4. 기술 구현 제안

### 4.1 백엔드 (Flask API)
```python
# 새로운 라우트 추가
@app.route('/analysis')
def analysis():
    return render_template('analysis.html')

@app.route('/api/analysis/summary')
def get_analysis_summary():
    # 전체 통계 반환
    pass

@app.route('/api/analysis/by-category')
def get_analysis_by_category():
    # 카테고리별 분석 반환
    pass

@app.route('/api/analysis/by-trend')
def get_analysis_by_trend():
    # 시계열 분석 반환
    pass

@app.route('/api/analysis/by-bank')
def get_analysis_by_bank():
    # 은행/계좌별 분석 반환
    pass
```

### 4.2 프론트엔드
- 새로운 HTML 템플릿: `templates/analysis.html`
- JavaScript로 차트 렌더링
- 반응형 디자인
- 필터 및 검색 UI

### 4.3 데이터 처리
- Pandas를 사용한 데이터 집계 및 분석
- JSON 형태로 API 응답
- 캐싱 고려 (성능 최적화)

## 5. UI/UX 제안

### 5.1 레이아웃
```
┌─────────────────────────────────────────┐
│  헤더 (메뉴: 대시보드, 카테고리, 추이 등) │
├─────────────────────────────────────────┤
│  필터 영역 (날짜, 은행, 금액 범위 등)    │
├─────────────────────────────────────────┤
│  통계 카드 (총입금, 총출금, 순잔액 등)  │
├─────────────────────────────────────────┤
│  차트 영역                               │
│  ┌─────────┐  ┌─────────┐             │
│  │ 차트 1  │  │ 차트 2  │             │
│  └─────────┘  └─────────┘             │
│  ┌─────────┐  ┌─────────┐             │
│  │ 차트 3  │  │ 차트 4  │             │
│  └─────────┘  └─────────┘             │
├─────────────────────────────────────────┤
│  상세 테이블 (필터링된 거래 내역)        │
└─────────────────────────────────────────┘
```

### 5.2 디자인 컨셉
- 깔끔하고 직관적인 인터페이스
- 카드 기반 레이아웃
- 다크 모드 옵션 (선택사항)
- 색상 코딩 (입금: 파란색, 출금: 빨간색)

## 6. 구현 우선순위

### Phase 1 (기본 기능)
1. 대시보드 페이지 생성
2. 기본 통계 카드 (총입금, 총출금, 거래건수)
3. 적요별 상위 10개 분석 (파이 차트)
4. 월별 추이 차트 (라인 차트)
5. 기본 필터 (날짜 범위, 은행)

### Phase 2 (고급 기능)
1. 내용별, 구분별 분석
2. 은행/계좌별 분석
3. 상세 검색 기능
4. 엑셀 내보내기
5. 차트 다운로드 (이미지)

### Phase 3 (고급 분석)
1. 트렌드 분석
2. 예측 기능 (선택사항)
3. 알림 기능 (특정 조건 알림)
4. 리포트 생성 및 저장

## 7. 샘플 분석 쿼리 예시

### 7.1 적요별 입금 상위 10개
```python
df.groupby('적요')['입금액'].sum().sort_values(ascending=False).head(10)
```

### 7.2 월별 입출금 추이
```python
df['거래월'] = pd.to_datetime(df['거래일']).dt.to_period('M')
monthly = df.groupby('거래월').agg({
    '입금액': 'sum',
    '출금액': 'sum'
})
```

### 7.3 구분별 통계
```python
df.groupby('구분').agg({
    '입금액': 'sum',
    '출금액': 'sum',
    '거래일': 'count'
})
```

## 8. 파일 구조 제안

```
FISTBANK/
├── app.py (기존)
├── integrate_bank_transactions.py (기존)
├── analysis.py (새로운 분석 함수들)
├── templates/
│   ├── index.html (기존)
│   ├── analysis.html (새로운 분석 페이지)
│   └── analysis/
│       ├── category.html (카테고리별 상세)
│       ├── trend.html (시계열 상세)
│       └── bank.html (은행별 상세)
└── static/
    └── js/
        └── analysis.js (분석 페이지 JavaScript)
```

## 9. 추가 제안사항

1. **데이터 새로고침 버튼**: 통합 파일을 다시 생성할 수 있는 기능
2. **기간 비교**: 두 기간의 데이터를 비교 분석
3. **카테고리 태그**: 자주 사용하는 적요/내용에 태그 기능
4. **예산 관리**: 카테고리별 예산 설정 및 추적
5. **반복 거래 검색**: 동일한 금액이나 패턴의 거래 찾기

## 10. 다음 단계

1. 이 제안서를 검토하고 우선순위 결정
2. Phase 1 구현 시작 (대시보드 기본 기능)
3. 사용자 피드백 수집 및 개선
