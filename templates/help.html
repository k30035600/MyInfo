<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>도움말 - 금융거래 통합정보</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { font-family: 'Malgun Gothic', '맑은 고딕', sans-serif; background-color: #f5f5f5; padding: 20px; }
        .container { max-width: 1920px; margin: 0 auto; background: white; border-radius: 10px; padding: 30px; box-shadow: 0 2px 10px rgba(0,0,0,0.1); }
        h1 { color: #333; margin-bottom: 30px; font-size: 2em; }
        h2 { color: #667eea; margin-top: 30px; margin-bottom: 15px; font-size: 1.5em; border-bottom: 2px solid #667eea; padding-bottom: 10px; }
        h3 { color: #555; margin-top: 20px; margin-bottom: 10px; font-size: 1.2em; }
        h4 { color: #444; margin-top: 14px; margin-bottom: 8px; font-size: 1.05em; }
        .help-section { margin-bottom: 30px; }
        .help-section p { line-height: 1.8; color: #666; margin-bottom: 10px; }
        .help-section ul, .help-section ol { margin-left: 20px; margin-bottom: 15px; }
        .help-section li { line-height: 1.8; color: #666; margin-bottom: 5px; }
        .code-block { background: #f8f9fa; border-left: 4px solid #667eea; padding: 15px; margin: 15px 0; border-radius: 4px; font-family: 'Courier New', monospace; overflow-x: auto; }
        .feature-list { display: grid; grid-template-columns: repeat(auto-fit, minmax(250px, 1fr)); gap: 20px; margin: 20px 0; }
        .feature-card { background: #f8f9fa; padding: 20px; border-radius: 8px; border-left: 4px solid #667eea; }
        .feature-card h4 { color: #667eea; margin-bottom: 10px; }
        .main-nav { display: flex; flex-wrap: wrap; gap: 5px; padding: 10px; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 8px; margin-bottom: 20px; box-shadow: 0 2px 8px rgba(0,0,0,0.1); max-width: 1920px; margin-left: auto; margin-right: auto; }
        .nav-item { padding: 10px 15px; background: rgba(255,255,255,0.9); color: #333; text-decoration: none; border-radius: 5px; font-weight: bold; font-size: 14px; transition: all 0.3s ease; flex: 1; min-width: 120px; text-align: center; white-space: nowrap; }
        .nav-item:hover { background: rgba(255,255,255,1); transform: translateY(-2px); box-shadow: 0 4px 8px rgba(0,0,0,0.2); }
        .nav-item.active { background: #FF9800; color: white; }
        .toc { background: #f0f4ff; padding: 20px; border-radius: 8px; margin-bottom: 25px; }
        .toc ul { list-style: none; margin-left: 0; }
        .toc a { color: #667eea; text-decoration: none; }
        .toc a:hover { text-decoration: underline; }
        .faq-item { margin-bottom: 12px; }
        .faq-q { font-weight: bold; color: #333; margin-bottom: 4px; }
        .faq-a { color: #666; margin-left: 12px; }
        @media (max-width: 768px) { .container { padding: 20px; } h1 { font-size: 1.5em; } h2 { font-size: 1.3em; } .feature-list { grid-template-columns: 1fr; } .main-nav { gap: 3px; padding: 8px; } .nav-item { font-size: 11px; padding: 6px 8px; min-width: 80px; flex: 1 1 calc(50% - 3px); } }
    </style>
</head>
<body>
    <nav class="main-nav">
        <a href="/" class="nav-item">🏠 홈</a>
        <a href="/bank/" class="nav-item">🏦 은행거래 전처리</a>
        <a href="/bank/category" class="nav-item">🏷️ 은행거래 카테고리</a>
        <a href="/bank/analysis/basic" class="nav-item">📊 은행거래 기본분석</a>
        <a href="/bank/help" class="nav-item">❓ 은행거래 도움말</a>
        <a href="/cash/" class="nav-item">📋 금융정보 전처리</a>
        <a href="/cash/category" class="nav-item">🏷️ 금융정보 카테고리</a>
        <a href="/cash/analysis/basic" class="nav-item">📊 금융정보 기본분석</a>
        <a href="/cash/help" class="nav-item">📋 금융거래 고급분석</a>
        <a href="/card/" class="nav-item">💳 신용카드 전처리</a>
        <a href="/card/category" class="nav-item">🏷️ 신용카드 카테고리</a>
        <a href="/card/analysis/basic" class="nav-item">📊 신용카드 기본분석</a>
        <a href="/help" class="nav-item active">❓ 금융정보 보고서</a>
    </nav>
    <div class="container">
        <h1>❓ 도움말 - 금융거래 통합정보</h1>

        <div class="help-section toc">
            <h2>목차</h2>
            <ul>
                <li><a href="#overview">1. 개요</a></li>
                <li><a href="#system">2. 시스템 구성</a></li>
                <li><a href="#run">3. 서버 실행 방법</a></li>
                <li><a href="#folders">4. 프로젝트 폴더 구조</a></li>
                <li><a href="#workflow">5. 권장 사용 흐름</a></li>
                <li><a href="#features">6. 주요 기능 상세</a></li>
                <li><a href="#services">7. 서비스별 요약 (MyBank / MyCard / MyCash)</a></li>
                <li><a href="#pages">8. 페이지별 기능 상세</a></li>
                <li><a href="#troubleshoot">9. 문제 해결</a></li>
                <li><a href="#faq">10. 자주 묻는 질문 (FAQ)</a></li>
                <li><a href="#urls">11. 접속 주소 목록</a></li>
            </ul>
        </div>

        <div class="help-section" id="overview">
            <h2>1. 개요</h2>
            <p>금융거래 통합정보(MyInfo)는 <strong>은행거래 통합정보(MyBank)</strong>, <strong>신용카드 통합정보(MyCard)</strong>, <strong>금융정보 종합분석(MyCash)</strong> 세 서비스를 한곳에서 제공하는 웹 기반 시스템입니다. 은행·신용카드 거래 내역을 전처리, 카테고리 분류, 기본·고급 분석을 통해 통합 관리하고 종합 분석할 수 있습니다.</p>
            <p>공통 사용 순서는 <strong>전처리 → 카테고리 분류 → 분석</strong>입니다. <strong>.source</strong> 아래 xls/xlsx는 <strong>클라이언트용</strong> 원본·업로드 데이터이고, category·before·after 관련 xlsx는 <strong>서버에서 사용</strong>합니다. 원본은 <strong>MyInfo/.source/Bank</strong>(은행·금융), <strong>MyInfo/.source/Card</strong>(카드)에 두고, *_before·*_after는 <strong>MyInfo/.source</strong>에, 카테고리 규칙은 <strong>MyInfo/info_category.xlsx</strong> 하나만 사용합니다.</p>
        </div>

        <div class="help-section" id="system">
            <h2>2. 시스템 구성</h2>
            <ul>
                <li><strong>통합 서버 (app.py)</strong>: 홈페이지(/)와 이 도움말(/help)을 제공하며, /bank/*, /card/*, /cash/* 요청을 각각 MyBank·MyCard·MyCash 서브 앱으로 전달합니다.</li>
                <li><strong>은행거래 통합정보 (MyBank)</strong>: URL 접두사 /bank/. 전처리(/bank/), 카테고리(/bank/category), 기본분석(/bank/analysis/basic), 은행거래 도움말(/bank/help). 은행 거래만 대상으로 합니다.</li>
                <li><strong>신용카드 통합정보 (MyCard)</strong>: URL 접두사 /card/. 전처리(/card/), 카테고리(/card/category), 기본분석(/card/analysis/basic), 신용카드 도움말(/card/help). 신용카드 거래만 대상으로 합니다.</li>
                <li><strong>금융정보 종합분석 (MyCash)</strong>: URL 접두사 /cash/. 전처리(/cash/), 카테고리(/cash/category), 기본분석(/cash/analysis/basic), 금융거래 고급분석(/cash/help). 은행·신용카드 거래를 하나로 모아 통합 관리·종합 분석합니다.</li>
            </ul>
        </div>

        <div class="help-section" id="run">
            <h2>3. 서버 실행 방법</h2>
            <p>프로젝트 루트(MyInfo 폴더)에서 다음 중 하나를 실행하세요.</p>
            <div class="code-block">cd MyInfo 프로젝트 경로
python app.py</div>
            <p>또는 <code>start-server.bat</code>(Windows) 또는 <code>start-server.ps1</code>(PowerShell)을 실행하세요. 최초 실행 시 필요한 패키지(pip install)가 자동 설치될 수 있으며, Waitress WSGI 서버가 기동됩니다.</p>
            <p><strong>기본 주소</strong>: 환경 변수 PORT가 없으면 <strong>http://localhost:8080</strong>(또는 5000), Railway/Heroku 등에서는 PORT가 주입되며 0.0.0.0으로 바인딩됩니다.</p>
        </div>

        <div class="help-section" id="folders">
            <h2>4. 프로젝트 폴더 구조</h2>
            <ul>
                <li><strong>MyInfo (루트)</strong>: app.py(통합 서버), start-server.bat, start-server.ps1, requirements.txt, VERSION, templates/(메인 템플릿) 등.</li>
                <li><strong>MyInfo/.source/Bank</strong>: 은행·금융 원본(.xls, .xlsx, 클라이언트용). <strong>MyInfo/.source</strong>: bank_before.xlsx, bank_after.xlsx, cash_*.xlsx, card_*.xlsx(서버 사용). 카테고리: <strong>MyInfo/info_category.xlsx</strong>만 사용. <strong>MyBank</strong>: bank_app.py, process_bank_data.py, templates/.</li>
                <li><strong>MyInfo/.source/Card</strong>: 카드 원본(.xls, .xlsx). <strong>MyCard</strong>: card_app.py, process_card_data.py, templates/.</li>
                <li><strong>MyCash</strong>: cash_app.py, process_cash_data.py, templates/. (금융 원본은 .source/Bank, 결과 파일은 Source/ 사용)</li>
            </ul>
        </div>

        <div class="help-section" id="workflow">
            <h2>5. 권장 사용 흐름</h2>
            <h3>1단계: 전처리</h3>
            <p><strong>은행·금융</strong> 원본은 <strong>MyInfo/.source/Bank</strong>에, <strong>카드</strong> 원본은 <strong>MyInfo/.source/Card</strong>에 넣습니다. 파일명에 은행명 또는 카드사명이 포함되어야 인식됩니다. 전처리 페이지에서 "전처리 실행"을 클릭하면 MyInfo/.source에 *_before.xlsx가 생성·갱신됩니다.</p>
            <h3>2단계: 카테고리</h3>
            <p>카테고리 페이지에서 "카테고리 생성"으로 <strong>info_category.xlsx</strong> 규칙을 만든 뒤, 필요 시 키워드·카테고리를 수정합니다. "카테고리 적용"을 실행하면 *_after.xlsx가 생성·갱신됩니다.</p>
            <h3>3단계: 분석</h3>
            <p>기본분석 페이지에서 전체 통계, 적요/가맹점별·월별·은행/카드사별 집계, 차트를 확인합니다. 상단 "은행명" 또는 "카드사" 필터와 "📄 출력" 버튼으로 인쇄용 뷰를 만들 수 있습니다.</p>
        </div>

        <div class="help-section" id="features">
            <h2>6. 주요 기능 상세</h2>
            <div class="feature-list">
                <div class="feature-card"><h4>📊 전처리</h4><p>여러 은행·카드사의 거래 내역을 하나의 표준 형식으로 통합합니다. MyInfo/.source/Bank 또는 .source/Card의 .xls/.xlsx를 읽어 MyInfo/.source에 bank_before.xlsx(은행), cash_before.xlsx(금융통합), card_before.xlsx(카드)를 저장합니다. 은행은 거래일·적요·입출금·은행명·계좌 등, 카드는 이용일·가맹점명·이용금액·카드사 등으로 컬럼이 통일됩니다.</p></div>
                <div class="feature-card"><h4>🏷️ 카테고리</h4><p>키워드 기반 자동 분류로 거래를 카테고리별로 정리합니다. 은행·신용카드 공통: 전처리, 후처리, 계정과목, 업종분류 등 (거래방법/거래지점 미사용) 등 분류와 키워드→카테고리 매핑을 관리하고, "카테고리 적용" 시 *_after.xlsx를 생성합니다.</p></div>
                <div class="feature-card"><h4>📈 기본분석</h4><p>전체 통계, 입출금 추이, 적요/가맹점별·월별·은행/계좌별 또는 카드사/카드별 집계, 막대·파이 차트를 통해 거래 패턴을 한눈에 파악합니다. 페이지 상단 필터와 "📄 출력" 버튼으로 범위 지정 및 인쇄가 가능합니다.</p></div>
            </div>
        </div>

        <div class="help-section" id="services">
            <h2>7. 서비스별 요약</h2>
            <h3>은행거래 통합정보 (MyBank)</h3>
            <p>지원 은행: <strong>국민은행, 신한은행, 하나은행</strong>. 파일명에 은행명이 포함되어야 인식합니다. 전처리 결과는 <strong>bank_before.xlsx</strong>, 카테고리 규칙은 <strong>info_category.xlsx</strong>(은행거래 구분), 카테고리 적용 후 최종 데이터는 <strong>bank_after.xlsx</strong>입니다. before→after 생성 시 category 전처리/후처리를 적용합니다. 기본분석은 bank_after.xlsx를 사용합니다. 상세 사용법은 <a href="/bank/help">은행거래 도움말</a>을 참고하세요.</p>
            <h3>금융정보 종합분석 (MyCash)</h3>
            <p>은행·신용카드 거래를 하나로 모아 통합 관리합니다. 전처리 결과는 <strong>cash_before.xlsx</strong>, 카테고리 규칙은 <strong>info_category.xlsx</strong>(금융정보 구분), 카테고리 적용 후 최종 데이터는 <strong>cash_after.xlsx</strong>입니다. before→after 시 category 전처리/후처리 적용. 상세 사용법·카테고리 체계·문제 해결은 <a href="/cash/help">금융거래 고급분석</a>을 참고하세요.</p>
            <h3>신용카드 통합정보 (MyCard)</h3>
            <p>지원 카드사: <strong>국민카드, 신한카드, 현대카드, 하나카드</strong>. 파일명 형식은 <code>카드사_기타.xlsx</code>(예: 신한카드_김찬식_2024.xlsx)이며, 첫 번째 밑줄 앞이 카드사명으로 사용됩니다. 전처리 결과는 <strong>card_before.xlsx</strong>, 카테고리 규칙은 <strong>info_category.xlsx</strong>(신용카드 구분), 카테고리 적용 후 최종 데이터는 <strong>card_after.xlsx</strong>입니다. 상세 내용은 <a href="/card/help">신용카드 도움말</a>을 참고하세요.</p>
        </div>

        <div class="help-section" id="pages">
            <h2>8. 페이지별 기능 상세</h2>
            <h3>은행거래 전처리 (/bank/)</h3>
            <ul><li>MyInfo/.source/Bank에 .xls/.xlsx를 넣고 "전처리 실행"을 클릭합니다.</li><li>전처리 전·후 데이터를 테이블로 비교할 수 있으며, <strong>은행</strong>, <strong>년·월</strong> 필터로 범위를 줄일 수 있습니다.</li></ul>
            <h3>은행거래 카테고리 (/bank/category)</h3>
            <ul><li>카테고리 테이블(분류, 키워드, 카테고리)을 추가·수정·삭제로 관리합니다. "카테고리 생성"으로 bank_before 기준 규칙을 자동 생성하고, "카테고리 적용"으로 bank_after.xlsx를 갱신합니다.</li></ul>
            <h3>은행거래 기본분석 (/bank/analysis/basic)</h3>
            <ul><li>전체 통계, 적요별·월별·은행/계좌별 분석, 차트를 제공합니다.</li></ul>
            <h3>금융정보 전처리 (/cash/)</h3>
            <ul><li>MyInfo/.source/Bank에 .xls/.xlsx를 넣고 "전처리 실행"을 클릭합니다. 전처리 전·후 데이터를 테이블로 비교할 수 있으며, <strong>은행</strong>, <strong>년·월</strong> 필터로 범위를 줄일 수 있습니다.</li></ul>
            <h3>금융정보 카테고리 (/cash/category)</h3>
            <ul><li>카테고리 테이블(분류, 키워드, 카테고리)을 관리합니다. "카테고리 생성"으로 cash_before 기준 규칙을 자동 생성하고, "카테고리 적용"으로 cash_after.xlsx를 갱신합니다.</li></ul>
            <h3>금융정보 기본분석 (/cash/analysis/basic)</h3>
            <ul><li>전체 통계, 적요별·월별·은행/계좌별 분석, 차트를 제공합니다.</li></ul>
            <h3>신용카드 전처리 (/card/)</h3>
            <ul><li>MyInfo/.source/Card에 .xls/.xlsx를 넣고 "전처리 실행"을 클릭합니다. 전처리 전·후 데이터 비교, <strong>카드사</strong>, <strong>년·월</strong> 필터를 사용할 수 있습니다.</li></ul>
            <h3>신용카드 카테고리 (/card/category)</h3>
            <ul><li>카테고리 테이블(계정과목, 업종분류)을 관리하고, "카테고리 생성" → "카테고리 적용"으로 card_after.xlsx를 갱신합니다. 헤더의 "카드사" 필터와 "📄 출력" 버튼을 사용할 수 있습니다.</li></ul>
            <h3>신용카드 기본분석 (/card/analysis/basic)</h3>
            <ul><li>전체 통계, 가맹점별·월별·카드사별 분석, 차트를 제공합니다. "카드사" 필터와 "📄 출력" 버튼으로 범위 지정 및 인쇄가 가능합니다.</li></ul>
        </div>

        <div class="help-section" id="troubleshoot">
            <h2>9. 문제 해결</h2>
            <h3>404 또는 페이지를 찾을 수 없음</h3>
            <ul><li>서버를 방금 시작했다면 은행/신용카드/금융정보 서브 앱이 로드될 때까지 잠시 후 새로고침해 보세요.</li><li>프로젝트가 OneDrive 등 동기화 폴더에 있으면 파일 읽기 오류로 일부 경로가 404가 될 수 있습니다. 오류 페이지에 표시되는 안내를 참고하고, 필요 시 프로젝트를 동기화가 완료된 로컬 경로로 옮겨 보세요.</li></ul>
            <h3>서버 연결 오류</h3>
            <ul><li>서버가 실행 중인지, 기본 포트(8080 또는 5000)가 다른 프로그램에서 사용 중이지 않은지 확인하세요.</li><li>방화벽에서 localhost 접속이 허용되는지 확인하세요.</li></ul>
            <h3>데이터가 표시되지 않음</h3>
            <ul><li>MyInfo/.source/Bank 또는 .source/Card에 .xls/.xlsx가 있고, 파일명에 은행명/카드사명이 포함되는지 확인하세요.</li><li>전처리 후 bank_before.xlsx, cash_before.xlsx 또는 card_before.xlsx가 MyInfo/.source에 생성되었는지 확인하세요. 파일이 Excel 등에서 열려 있으면 읽기 실패할 수 있습니다.</li><li>브라우저 F12 → Console에서 오류 메시지를 확인하세요.</li></ul>
            <h3>카테고리가 적용되지 않음</h3>
            <ul><li>MyInfo/info_category.xlsx가 있는지, "카테고리 생성"을 먼저 실행했는지 확인하세요.</li><li>*_after.xlsx를 Excel에서 열어둔 상태면 쓰기 오류가 날 수 있으니 파일을 닫고 다시 "카테고리 적용"을 실행하세요.</li></ul>
        </div>

        <div class="help-section" id="faq">
            <h2>10. 자주 묻는 질문 (FAQ)</h2>
            <div class="faq-item"><div class="faq-q">Q. MyBank와 MyCash의 차이는?</div><div class="faq-a">MyBank는 은행 거래만 다루고, MyCash는 은행·신용카드 거래를 하나로 모아 통합 관리·종합 분석합니다. 데이터 파일도 bank_* vs cash_*로 구분됩니다.</div></div>
            <div class="faq-item"><div class="faq-q">Q. 전처리 후에도 테이블이 비어요.</div><div class="faq-a">MyInfo/.source/Bank 또는 .source/Card의 파일명에 은행명(국민은행, 신한은행, 하나은행) 또는 카드사명이 포함되어 있는지 확인하세요. Excel에서 해당 파일을 닫은 뒤 전처리를 다시 실행해 보세요.</div></div>
            <div class="faq-item"><div class="faq-q">Q. 카테고리 적용이 안 돼요.</div><div class="faq-a">*_after.xlsx를 Excel 등에서 열어두지 마세요. "카테고리 생성"을 먼저 실행한 뒤 "카테고리 적용"을 실행하세요.</div></div>
            <div class="faq-item"><div class="faq-q">Q. 포트 번호를 바꾸고 싶어요.</div><div class="faq-a">환경 변수 PORT를 설정하면 해당 포트로 서버가 기동됩니다. 예: Windows에서 <code>set PORT=9000</code> 후 python app.py</div></div>
        </div>

        <div class="help-section" id="urls">
            <h2>11. 접속 주소 목록</h2>
            <p>기본 포트는 8080(또는 환경 변수 PORT)입니다. 아래에서 <code>5000</code>은 예시이므로 실제 사용 포트로 바꿔 접속하세요.</p>
            <ul>
                <li><strong>홈페이지:</strong> http://localhost:5000/</li>
                <li><strong>금융거래 도움말:</strong> http://localhost:5000/help</li>
                <li><strong>은행거래 전처리:</strong> http://localhost:5000/bank/</li>
                <li><strong>은행거래 카테고리:</strong> http://localhost:5000/bank/category</li>
                <li><strong>은행거래 기본분석:</strong> http://localhost:5000/bank/analysis/basic</li>
                <li><strong>은행거래 도움말:</strong> http://localhost:5000/bank/help</li>
                <li><strong>금융정보 전처리:</strong> http://localhost:5000/cash/</li>
                <li><strong>금융정보 카테고리:</strong> http://localhost:5000/cash/category</li>
                <li><strong>금융정보 기본분석:</strong> http://localhost:5000/cash/analysis/basic</li>
                <li><strong>금융거래 고급분석:</strong> http://localhost:5000/cash/help</li>
                <li><strong>신용카드 전처리:</strong> http://localhost:5000/card/</li>
                <li><strong>신용카드 카테고리:</strong> http://localhost:5000/card/category</li>
                <li><strong>신용카드 기본분석:</strong> http://localhost:5000/card/analysis/basic</li>
                <li><strong>신용카드 도움말:</strong> http://localhost:5000/card/help</li>
            </ul>
        </div>
    </div>
</body>
</html>
