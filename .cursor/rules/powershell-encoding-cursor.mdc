---
description: Cursor 터미널 한글 깨짐 및 Add-Content -Encoding 오류 방지
alwaysApply: true
---

# Cursor 터미널 한글 깨짐 / Add-Content -Encoding 오류

## 현상

- 터미널에서 한글이 `Ű  ̸` 처럼 깨져 보임.
- Cursor가 생성한 임시 스크립트 실행 시:
  `Add-Content : ... 'Encoding' ... Ű  ã ϴ` (매개 변수를 찾을 수 없습니다)

## 원인

1. **한글 깨짐**
   - PowerShell이 오류 메시지를 **CP949**로 출력하는데, Cursor/로그는 **UTF-8**로 해석하거나 그 반대라서 깨짐.
   - **경로에 한글이 있으면**(예: `C:\Users\k3003.삼아개발\...`) Cursor가 임시 스크립트 경로를 넣을 때 인코딩이 꼬여 깨짐이 더 자주 납니다.
   - **%TEMP% 폴더 경로에 한글이 있으면**(예: `C:\Users\삼아개발\AppData\Local\Temp`) Cursor가 `ps-script-xxxx.ps1` 임시 스크립트를 만들 때 경로가 깨져 `New-Item`/`Add-Content` 오류가 발생합니다.

2. **Add-Content -Encoding 오류**
   - Cursor가 명령 실행 시 `%TEMP%\ps-script-xxxx.ps1` 같은 스크립트를 만들고, 그 안에서 `Add-Content -Encoding UTF8`을 사용합니다.
   - 사용 중인 **PowerShell 버전**이 오래되었거나, **한글 경로** 때문에 스크립트가 제대로 실행되지 않으면 `-Encoding` 매개 변수를 인식하지 못하는 것처럼 보일 수 있습니다.
   - **PowerShell 7(pwsh)**에서는 `-Encoding`이 정상 동작합니다.

## 해결 방법

### 1) TEMP/TMP를 한글 없는 경로로 설정 (권장, 가장 확실)

- **%TEMP%** 경로에 한글이 있으면 Cursor 임시 스크립트가 깨집니다. **TEMP/TMP를 `C:\Temp`로 설정**한 뒤 Cursor를 실행하세요.
- 프로젝트 루트의 **`start-cursor-no-hangul.ps1`** 을 실행하면 TEMP=C:\Temp로 설정 후 Cursor를 시작합니다.
- 또는 사용자 환경 변수에서 **TEMP**, **TMP** 를 **C:\Temp** 로 설정 (영구 적용).

### 2) 한글 없는 경로로 작업

- Cursor에서 **한글이 전혀 없는 경로**만 쓰도록 하면, 임시 스크립트 경로 깨짐과 인코딩 문제가 크게 줄어듭니다.
- **파일 > 폴더 열기**에서 **`C:\CursorWorkspace`** 만 열어서 작업합니다.  
  (실제 프로젝트가 `OneDrive\Cursor\MyInfo` 등이면, 그 폴더를 `C:\CursorWorkspace\MyInfo`처럼 **바로가기(심볼릭 링크/정션)** 로 연결해 두고 `C:\CursorWorkspace`를 연다.)
- 이렇게 하면 Cursor가 만드는 임시 스크립트 경로에 한글이 들어가지 않습니다.

### 3) PowerShell 7 사용

- **PowerShell 7(pwsh)** 을 설치한 뒤, Cursor **기본 터미널**을 **PowerShell 7**로 맞춥니다.
  - [PowerShell 7 설치](https://learn.microsoft.com/ko-kr/powershell/scripting/install/installing-powershell-on-windows)
- Cursor: **설정 > Terminal > Integrated > Default Profile: Windows** 에서 **PowerShell** 대신 **PowerShell 7** 이 선택되도록 설정합니다.
- PowerShell 7은 UTF-8·`-Encoding` 지원이 좋아서, Cursor가 쓰는 `Add-Content -Encoding UTF8` 도 오류 없이 동작하는 경우가 많습니다.

### 4) UTF-8 출력 설정 (보조)

- 터미널에서 한글 출력이 나오기 전에 한 번 실행:
  ```powershell
  chcp 65001 | Out-Null; [Console]::OutputEncoding = [System.Text.Encoding]::UTF8
  ```
- Cursor 터미널 프로필에서 **UTF-8** 사용이 켜져 있는지 확인합니다.

## 요약

| 목표           | 권장 조치                                      |
|----------------|-----------------------------------------------|
| 원인 제거      | **TEMP/TMP를 C:\Temp로 설정** 후 Cursor 실행 (start-cursor-no-hangul.ps1) |
| 한글 깨짐 감소 | 한글 없는 워크스페이스 경로 사용 (예: C:\CursorWorkspace) |
| -Encoding 오류 | 기본 터미널을 **PowerShell 7** 로 변경         |
| 출력 인코딩    | `chcp 65001` + UTF-8 프로필 / 스크립트 내 설정 |
